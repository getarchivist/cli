project_name: archivist

builds:
  - main: ./cmd/archivist
    ldflags:
      - -X 'main.version={{ .Version }}'
      - -X 'main.commit={{ .Commit }}'
      - -X 'main.date={{ .Date }}'
      - -X 'main.clientID={{ .Env.ARCHIVIST_OAUTH_CLIENT_ID }}'
      - -X 'main.authURL={{ .Env.ARCHIVIST_OAUTH_AUTH_URL }}'
      - -X 'main.tokenURL={{ .Env.ARCHIVIST_OAUTH_TOKEN_URL }}'
    goos:
      - linux
      - darwin
    goarch:
      - amd64
      - arm64

archives:
  - format: tar.gz
    name_template: "{{ .ProjectName }}-{{ .Os }}-{{ .Arch }}"

checksum:
  name_template: "checksums.txt"

release:
  github:
    owner: getarchivist
    name: cli 
    make_latest: true
